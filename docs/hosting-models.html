<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Razor Components hosting models </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Razor Components hosting models ">
    <meta name="generator" content="docfx 2.40.7.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="razor-components/hosting-models">
<h1 id="razor-components-hosting-models">Razor Components hosting models</h1>

<p>By <a href="https://github.com/danroth27">Daniel Roth</a></p>
<div class="NOTE"><h5>Note</h5><p>ASP.NET Core Razor Components is supported in ASP.NET Core 3.0 or later.</p>
<p>Blazor is an unsupported experimental web framework that shouldn&#39;t be used for production workloads at this time.</p>
</div>
<p>Razor Components is a web framework designed to run client-side in the browser on a WebAssembly-based .NET runtime (<em>Blazor</em>) or server-side in ASP.NET Core (<em>ASP.NET Core Razor Components</em>). Regardless of the hosting model, the app and component models <em>remain the same</em>. This article discusses the available hosting models.</p>
<h2 id="client-side-hosting-model">Client-side hosting model</h2>
<p>The principal hosting model for Blazor is running client-side in the browser. In this model, the Blazor app, its dependencies, and the .NET runtime are downloaded to the browser. The app is executed directly on the browser UI thread. All UI updates and event handling happens within the same process. The app assets can be deployed as static files using whatever web server is preferred (see <a class="xref" href="host-and-deploy/index.html">Host and deploy</a>).</p>
<p><img src="hosting-models/_static/client-side.png" alt="Blazor client-side: The Blazor app runs on a UI thread inside the browser."></p>
<p>To create a Blazor app using the client-side hosting model, use the <strong>Blazor</strong> or <strong>Blazor (ASP.NET Core Hosted)</strong> project templates (<code>blazor</code> or <code>blazorhosted</code> template when using the <a href="https://docs.microsoft.com/dotnet/core/tools/dotnet-new">dotnet new</a> command at a command prompt). The included <em>blazor.webassembly.js</em> script handles:</p>
<ul>
<li>Downloading the .NET runtime, the app, and its dependencies.</li>
<li>Initialization of the runtime to run the app.</li>
</ul>
<p>The client-side hosting model offers several benefits. Client-side Blazor:</p>
<ul>
<li>Has no .NET server-side dependency.</li>
<li>Has a rich interactive UI.</li>
<li>Fully leverages client resources and capabilities.</li>
<li>Offloads work from the server to the client.</li>
<li>Supports offline scenarios.</li>
</ul>
<p>There are downsides to client-side hosting. Client-side Blazor:</p>
<ul>
<li>Restricts the app to the capabilities of the browser.</li>
<li>Requires capable client hardware and software (for example, WebAssembly support).</li>
<li>Has a larger download size and longer app load time.</li>
<li>Has less mature .NET runtime and tooling support (for example, limitations in .NET Standard support and debugging).</li>
</ul>
<p>Visual Studio includes the <strong>Blazor (ASP.NET Core hosted)</strong> project template for creating a Blazor app that runs on WebAssembly and is hosted on an ASP.NET Core server. The ASP.NET Core app serves the Blazor app to clients but is otherwise a separate process. The client-side Blazor app can interact with the server over the network using Web API calls or SignalR connections.</p>
<div class="IMPORTANT"><h5>Important</h5><p>If a client-side Blazor app is served by an ASP.NET Core app hosted as an IIS sub-app, disable the inherited ASP.NET Core Module handler. Set the app base path in the Blazor app&#39;s <em>index.html</em> file to the IIS alias used when configuring the sub-app in IIS.</p>
<p>For more information, see <a class="xref" href="host-and-deploy/index.html#app-base-path">App base path</a>.</p>
</div>
<h2 id="server-side-hosting-model">Server-side hosting model</h2>
<p>In the ASP.NET Core Razor Components server-side hosting model, the app is executed on the server from within an ASP.NET Core app. UI updates, event handling, and JavaScript calls are handled over a SignalR connection.</p>
<p><img src="hosting-models/_static/client-side.png" alt="ASP.NET Core Razor Components server-side: The browser interacts with the app (hosted inside of an ASP.NET Core app) on the server over a SignalR connection."></p>
<p>To create a Razor Components app using the server-side hosting model, use the <strong>Blazor (Server-side in ASP.NET Core)</strong> template (<code>blazorserver</code> when using <a href="https://docs.microsoft.com/dotnet/core/tools/dotnet-new">dotnet new</a> at a command prompt). An ASP.NET Core app hosts the Razor Components server-side app and sets up the SignalR endpoint where clients connect. The ASP.NET Core app references the app&#39;s <code>Startup</code> class to add:</p>
<ul>
<li>Server-side Razor Components services.</li>
<li>The app to the request handling pipeline.</li>
</ul>
<pre><code class="lang-csharp" highlight-lines="5,27">public class Startup
{
    public void ConfigureServices(IServiceCollection services)
    {
        services.AddServerSideBlazor&lt;App.Startup&gt;();

        services.AddResponseCompression(options =&gt;
        {
            options.MimeTypes = ResponseCompressionDefaults.MimeTypes.Concat(new[]
            {
                MediaTypeNames.Application.Octet,
                WasmMediaTypeNames.Application.Wasm,
            });
        });
    }

    public void Configure(IApplicationBuilder app, IHostingEnvironment env)
    {
        app.UseResponseCompression();

        if (env.IsDevelopment())
        {
            app.UseDeveloperExceptionPage();
        }

        // Use component registrations and static files from the app project.
        app.UseServerSideBlazor&lt;App.Startup&gt;();
    }
}
</code></pre><p>The <em>blazor.server.js</em> script&dagger; establishes the client connection. It&#39;s the app&#39;s responsibility to persist and restore app state as required (for example, in the event of a lost network connection).</p>
<p>The server-side hosting model offers several benefits:</p>
<ul>
<li>Allows you to write your entire app with .NET and C# using the component model.</li>
<li>Provides a rich interactive feel and avoids unnecessary page refreshes.</li>
<li>Has a significantly smaller app size than a client-side Blazor app and loads much faster.</li>
<li>Component logic can take full advantage of server capabilities, including using any .NET Core compatible APIs.</li>
<li>Runs on .NET Core on the server, so existing .NET tooling, such as debugging, works as expected.</li>
<li>Works with thin clients (for example, browsers that don&#39;t support WebAssembly and resource constrained devices).</li>
</ul>
<p>There are downsides to server-side hosting:</p>
<ul>
<li>Has higher latency: Every user interaction involves a network hop.</li>
<li>Offers no offline support: If the client connection fails, the app stops working.</li>
<li>Has reduced scalability: The server must manage multiple client connections and handle client state.</li>
<li>Requires an ASP.NET Core server to serve the app. Deployment without a server (for example, from a CDN) isn&#39;t possible.</li>
</ul>
<p>&dagger;The <em>blazor.server.js</em> script is published to the following path: <em>bin/{Debug|Release}/{TARGET FRAMEWORK}/publish/{APPLICATION NAME}.App/dist/_framework</em>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/aspnet/Blazor.Docs/blob/master/docs/hosting-models.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
